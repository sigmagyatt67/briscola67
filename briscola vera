#include <iostream>
#include <windows.h>
#include <cstdlib>
#include <stdio.h>
#include <stdlib.h>
#include <vector> 
#include <string>
#include <algorithm>
#include <ctime>
#include <random>
#include <sstream>

using namespace std;

// Struttura mydata per creare le carte
struct mydata {
    int value;    
    string segno; 
};   

// Funzione per calcolare i punti di Briscola
int puntiDaValore(int v) {
    if (v == 1) return 11;
    if (v == 3) return 10;
    if (v == 10) return 4;
    if (v == 9) return 3;
    if (v == 8) return 2;
    return 0;
}

/*############################################################################################################*/
string convertiValore(int v) {
    string s = to_string(v);
    if (s.size() == 1)
        return " " + s;   
    return s;           
}             // per inserire i 10 senza far slittare le carte, dando uno spazio prima dei numeri se sono fatti di una sola cifra

/*############################################################################################################*/
string inserisciNumero(const string &ascii, int numero) {
    string risultato;
    string num = convertiValore(numero);


    // Copia riga per riga e sostituisce {NUM}
    size_t pos = 0, start = 0;
    while ((pos = ascii.find("{NUM}", start)) != string::npos) {
        risultato += ascii.substr(start, pos - start);
        risultato += num; 
        start = pos + 5; // lunghezza "{NUM}"
    }
    risultato += ascii.substr(start);
    return risultato;
}
/*############################################################################################################*/
vector<string> splitRighe(const string &ascii) {
    vector<string> righe;
    string r;
    stringstream ss(ascii);
    while (getline(ss, r)) righe.push_back(r);
    return righe;
}
struct BloccoCarta { 
    vector<string> righe;
        WORD colore; };





void stampaManoAffiancata(const vector<mydata> &mano,
                          const string &cartaCoppe,
                          const string &cartaBastoni,
                          const string &cartaSpade,
                          const string &cartaDenari)
{
    HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE);

    vector<BloccoCarta> blocchi;

    for (auto &c : mano) {
        string art;
        string s = c.segno;
        for (auto &ch : s) ch = tolower(ch);

        if (s == "coppe") art = cartaCoppe;
        else if (s == "bastoni") art = cartaBastoni;
        else if (s == "spade") art = cartaSpade;
        else if (s == "denari") art = cartaDenari;

        art = inserisciNumero(art, c.value);

        WORD colore;

        if (s == "coppe")
            colore = FOREGROUND_RED | FOREGROUND_INTENSITY;
        else if (s == "bastoni")
            colore = FOREGROUND_GREEN | FOREGROUND_INTENSITY;
        else if (s == "spade")
            colore = FOREGROUND_BLUE | FOREGROUND_INTENSITY;
        else if (s == "denari")
            colore = FOREGROUND_RED | FOREGROUND_GREEN | FOREGROUND_INTENSITY;

        blocchi.push_back({ splitRighe(art), colore });
    }

    int righe = blocchi[0].righe.size();

    for (int r = 0; r < righe; r++) {
        for (int i = 0; i < blocchi.size(); i++) {
            SetConsoleTextAttribute(hConsole, blocchi[i].colore);
            cout << blocchi[i].righe[r] << "   ";
        }
        cout << "\n";
    }

    SetConsoleTextAttribute(hConsole, FOREGROUND_RED | FOREGROUND_GREEN | FOREGROUND_BLUE);
}

/*############################################################################################################*/
void stampaCarta(const mydata &c, 
                 const string &cartaCoppe, 
                 const string &cartaBastoni,
                 const string &cartaSpade,
                 const string &cartaDenari) 
{
    HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE);

    string s = c.segno;
    for (auto &ch : s) ch = tolower(ch);

    string art;

    if (s == "coppe") art = cartaCoppe;
    else if (s == "bastoni") art = cartaBastoni;
    else if (s == "spade") art = cartaSpade;
    else if (s == "denari") art = cartaDenari;

    art = inserisciNumero(art, c.value);

    // colorazione
    if (s == "coppe")
        SetConsoleTextAttribute(hConsole, FOREGROUND_RED | FOREGROUND_INTENSITY);
    else if (s == "bastoni")
        SetConsoleTextAttribute(hConsole, FOREGROUND_GREEN | FOREGROUND_INTENSITY);
    else if (s == "spade")
        SetConsoleTextAttribute(hConsole, FOREGROUND_BLUE | FOREGROUND_INTENSITY);
    else if (s == "denari")
        SetConsoleTextAttribute(hConsole, FOREGROUND_RED | FOREGROUND_GREEN | FOREGROUND_INTENSITY); // giallo

    cout << art << endl;


    SetConsoleTextAttribute(hConsole, FOREGROUND_RED | FOREGROUND_GREEN | FOREGROUND_BLUE);
}

/*############################################################################################################*/

int scegliScartinaBot(const vector<mydata>& mano) {
    int indice = 0;
    int minPunti = 100;

    for (int i = 0; i < mano.size(); i++) {
        int p = puntiDaValore(mano[i].value);
        if (p < minPunti) {
            minPunti = p;
            indice = i;
        }
    }
    return indice;
}

/*############################################################################################################*/

int scegliRispostaBot(const vector<mydata>& mano, const mydata& cartaPrima, const string& BRISCOLA) {

    for (int i = 0; i < mano.size(); i++) {
        if (mano[i].segno == cartaPrima.segno &&
            puntiDaValore(mano[i].value) > puntiDaValore(cartaPrima.value))
            return i;

        if (mano[i].segno == BRISCOLA && cartaPrima.segno != BRISCOLA)
            return i;
    }

    return scegliScartinaBot(mano);
}

/*############################################################################################################*/

vector<mydata> generaMazzo() {
    vector<mydata> mazzo;
    
    srand(time(NULL));

    for(int a = 1; a <= 10; a++) mazzo.push_back({a, "Denari"});
    for(int a = 1; a <= 10; a++) mazzo.push_back({a, "Bastoni"});
    for(int a = 1; a <= 10; a++) mazzo.push_back({a, "Spade"});
    for(int a = 1; a <= 10; a++) mazzo.push_back({a, "Coppe"});

    random_device rd;
    mt19937 g(rand()%1000);
    shuffle(mazzo.begin(), mazzo.end(), g);

    return mazzo;
}
/*############################################################################################################*/
int duecontrodue_difficile(const string &cartaCoppe,
                           const string &cartaBastoni,
                           const string &cartaSpade,
                           const string &cartaDenari)
{
    srand(time(NULL));
    setlocale(LC_ALL, "ita");

    vector<mydata> mazzo = generaMazzo();

    vector<mydata> manoGiocatore, manoCompagno, manoBot1, manoBot2;

    for (int i = 0; i < 3; i++) {
        manoGiocatore.push_back(mazzo.back()); mazzo.pop_back();
        manoCompagno.push_back(mazzo.back()); mazzo.pop_back();
        manoBot1.push_back(mazzo.back()); mazzo.pop_back();
        manoBot2.push_back(mazzo.back()); mazzo.pop_back();
    }

    string BRISCOLA = mazzo.back().segno;
    cout << "BRISCOLA: " << BRISCOLA << endl;
    Sleep(1500);

    int puntiSq1 = 0;
    int puntiSq2 = 0;

    while (!manoGiocatore.empty()) {

        cout << "\n--- NUOVA MANO 2v2 (DIFFICILE) ---\n";
        cout << "Ordine: TU -> Bot1 -> Compagno -> Bot2\n";
        Sleep(750);

        cout << "La tua mano:\n";
        stampaManoAffiancata(manoGiocatore, cartaCoppe, cartaBastoni, cartaSpade, cartaDenari);

        mydata cGiocatore, cBot1, cCompagno, cBot2;

        // io
        int scelta;
        do {
            cout << "Scegli la carta da giocare (0,1,2): ";
            cin >> scelta;
        } while (scelta < 0 || scelta >= manoGiocatore.size());

        cGiocatore = manoGiocatore[scelta];
        manoGiocatore.erase(manoGiocatore.begin() + scelta);

        cout << "Hai giocato:\n";
        stampaCarta(cGiocatore, cartaCoppe, cartaBastoni, cartaSpade, cartaDenari);
        Sleep(750);

        // La carta dominante della mano è la prima giocata
        mydata cartaDominante = cGiocatore;

        // bot1 risponde alla carta dominante 
        int idxBot1 = scegliRispostaBot(manoBot1, cartaDominante, BRISCOLA);
        cBot1 = manoBot1[idxBot1];
        manoBot1.erase(manoBot1.begin() + idxBot1);

        cout << "Bot1 gioca: " << cBot1.value << " di " << cBot1.segno << endl;
        Sleep(750);

        // compagno risponde alla carta dominante
        int idxComp = scegliRispostaBot(manoCompagno, cartaDominante, BRISCOLA);
        cCompagno = manoCompagno[idxComp];
        manoCompagno.erase(manoCompagno.begin() + idxComp);

        cout << "Compagno gioca: " << cCompagno.value << " di " << cCompagno.segno << endl;
        Sleep(750);

        // bot 2 risponde alla carta dominante
        int idxBot2 = scegliRispostaBot(manoBot2, cartaDominante, BRISCOLA);
        cBot2 = manoBot2[idxBot2];
        manoBot2.erase(manoBot2.begin() + idxBot2);

        cout << "Bot2 gioca: " << cBot2.value << " di " << cBot2.segno << endl;
        Sleep(750);

        //vincitore:
        vector<pair<mydata,string>> ordine = {
            {cGiocatore, "sq1"},
            {cBot1, "sq2"},
            {cCompagno, "sq1"},
            {cBot2, "sq2"}
        };

        string semeInizio = cGiocatore.segno;
        int best = -1;
        string vincitore;

        for (auto &x : ordine) {
            int forza = 0;

            if (x.first.segno == BRISCOLA) forza += 100;
            if (x.first.segno == semeInizio) forza += 50;
            forza += puntiDaValore(x.first.value);

            if (forza > best) {
                best = forza;
                vincitore = x.second;
            }
        }

        int puntiMano = puntiDaValore(cGiocatore.value)
                      + puntiDaValore(cBot1.value)
                      + puntiDaValore(cCompagno.value)
                      + puntiDaValore(cBot2.value);

        if (vincitore == "sq1") {
            puntiSq1 += puntiMano;
            cout << "La mano è vinta dalla TUA SQUADRA! +" << puntiMano << endl;
        } else {
            puntiSq2 += puntiMano;
            cout << "La mano è vinta dalla SQUADRA BOT! +" << puntiMano << endl;
        }

        //pesca
        if (!mazzo.empty()) {
            if (vincitore == "sq1") {
                manoGiocatore.push_back(mazzo.back()); mazzo.pop_back();
                manoCompagno.push_back(mazzo.back()); mazzo.pop_back();
                manoBot1.push_back(mazzo.back()); mazzo.pop_back();
                manoBot2.push_back(mazzo.back()); mazzo.pop_back();
            } else {
                manoBot1.push_back(mazzo.back()); mazzo.pop_back();
                manoBot2.push_back(mazzo.back()); mazzo.pop_back();
                manoGiocatore.push_back(mazzo.back()); mazzo.pop_back();
                manoCompagno.push_back(mazzo.back()); mazzo.pop_back();
            }
        }

        cout << "Punteggio: TU+Compagno = " << puntiSq1
             << " | Bot = " << puntiSq2 << endl;
    }

    cout << "\n=== PARTITA TERMINATA ===\n";
    cout << "Squadra TU: " << puntiSq1 << endl;
    cout << "Squadra BOT: " << puntiSq2 << endl;

    return 0;
}
/*############################################################################################################*/
int duecontrodue(const string &cartaCoppe,
                 const string &cartaBastoni,
                 const string &cartaSpade,
                 const string &cartaDenari)
{
    srand(time(NULL));
    setlocale(LC_ALL, "ita");

    vector<mydata> mazzo = generaMazzo();

    vector<mydata> manoGiocatore, manoCompagno, manoBot1, manoBot2;

    for (int i = 0; i < 3; i++) {
        manoGiocatore.push_back(mazzo.back()); mazzo.pop_back();
        manoCompagno.push_back(mazzo.back()); mazzo.pop_back();
        manoBot1.push_back(mazzo.back()); mazzo.pop_back();
        manoBot2.push_back(mazzo.back()); mazzo.pop_back();
    }

    string BRISCOLA = mazzo.back().segno;
    cout << "BRISCOLA: " << BRISCOLA << endl;
    Sleep(2000);
    int puntiSq1 = 0;
    int puntiSq2 = 0;

    while (!manoGiocatore.empty()) {

        cout << "\n--- NUOVA MANO ---\n";
        cout << "Ordine: TU -> Bot1 -> Compagno -> Bot2\n";
Sleep(750);
        cout << "La tua mano:\n";
        stampaManoAffiancata(manoGiocatore, cartaCoppe, cartaBastoni, cartaSpade, cartaDenari);

        mydata cGiocatore, cBot1, cCompagno, cBot2;

        int scelta;
        do {
            cout << "Scegli la carta da giocare (0,1,2): ";
            cin >> scelta;
        } while (scelta < 0 || scelta >= manoGiocatore.size());

        cGiocatore = manoGiocatore[scelta];
        manoGiocatore.erase(manoGiocatore.begin() + scelta);
Sleep(750);
        cout << "Hai giocato:\n";
        stampaCarta(cGiocatore, cartaCoppe, cartaBastoni, cartaSpade, cartaDenari);

        int idxBot1 = scegliRispostaBot(manoBot1, cGiocatore, BRISCOLA);
        cBot1 = manoBot1[idxBot1];
        manoBot1.erase(manoBot1.begin() + idxBot1);
Sleep(750);
        cout << "Bot1 gioca: "
             << cBot1.value << " di " << cBot1.segno
             << " (" << puntiDaValore(cBot1.value) << " punti)" << endl;

        int idxComp = scegliRispostaBot(manoCompagno, cGiocatore, BRISCOLA);
        cCompagno = manoCompagno[idxComp];
        manoCompagno.erase(manoCompagno.begin() + idxComp);
Sleep(750);
        cout << "Il tuo compagno gioca: "
             << cCompagno.value << " di " << cCompagno.segno
             << " (" << puntiDaValore(cCompagno.value) << " punti)" << endl;

        int idxBot2 = scegliRispostaBot(manoBot2, cGiocatore, BRISCOLA);
        cBot2 = manoBot2[idxBot2];
        manoBot2.erase(manoBot2.begin() + idxBot2);
Sleep(750);
        cout << "Bot2 gioca: "
             << cBot2.value << " di " << cBot2.segno
             << " (" << puntiDaValore(cBot2.value) << " punti)" << endl;

        vector<pair<mydata,string>> ordine = {
            {cGiocatore, "sq1"},
            {cBot1, "sq2"},
            {cCompagno, "sq1"},
            {cBot2, "sq2"}
        };

        string semeInizio = cGiocatore.segno;
        int best = -1;
        string vincitore;

        for (auto &x : ordine) {
            int forza = 0;

            if (x.first.segno == BRISCOLA) forza += 100;
            if (x.first.segno == semeInizio) forza += 50;
            forza += puntiDaValore(x.first.value);

            if (forza > best) {
                best = forza;
                vincitore = x.second;
            }
        }

        int puntiMano = puntiDaValore(cGiocatore.value)
                      + puntiDaValore(cBot1.value)
                      + puntiDaValore(cCompagno.value)
                      + puntiDaValore(cBot2.value);
Sleep(750);
        if (vincitore == "sq1") {
            puntiSq1 += puntiMano;
            cout << "La mano è vinta dalla TUA SQUADRA! +" << puntiMano << endl;
        } else {
            puntiSq2 += puntiMano;
            cout << "La mano è vinta dalla SQUADRA BOT! +" << puntiMano << endl;
        }

        if (!mazzo.empty()) {
            if (vincitore == "sq1") {
                manoGiocatore.push_back(mazzo.back()); mazzo.pop_back();
                manoCompagno.push_back(mazzo.back()); mazzo.pop_back();
                manoBot1.push_back(mazzo.back()); mazzo.pop_back();
                manoBot2.push_back(mazzo.back()); mazzo.pop_back();
            } else {
                manoBot1.push_back(mazzo.back()); mazzo.pop_back();
                manoBot2.push_back(mazzo.back()); mazzo.pop_back();
                manoGiocatore.push_back(mazzo.back()); mazzo.pop_back();
                manoCompagno.push_back(mazzo.back()); mazzo.pop_back();
            }
        }

        cout << "Punteggio: TU+Compagno = " << puntiSq1
             << " | Bot = " << puntiSq2 << endl;
    }

    cout << "\n=== PARTITA TERMINATA ===\n";
    cout << "TU: " << puntiSq1 << endl;
    cout << "Squadra BOT: " << puntiSq2 << endl;

    return 0;
}
/*#######################################################################################################*/
int unocontrounomedio(const string &cartaCoppe, const string &cartaBastoni,
                      const string &cartaSpade, const string &cartaDenari){
 
    srand(time(NULL));
    setlocale(LC_ALL, "ita");
    
    int puntisq2 = 0;
    int puntisq1 = 0;
    
    vector<mydata> mazzo = generaMazzo();

    vector<mydata> mano1, mano2;
    for (int i = 0; i < 3; ++i) {
        mano1.push_back(mazzo.back()); mazzo.pop_back();
        mano2.push_back(mazzo.back()); mazzo.pop_back();
    }
Sleep(750);
    string BRISCOLA = mazzo.back().segno;
    cout << "BRISCOLA : " << BRISCOLA << endl;

    string primo_giocatore = "squadra1";
Sleep(750);
    while (!mano1.empty() && !mano2.empty()) {
        cout << "\n--- Nuova mano ---\n";
        cout << "Primo a giocare: " << primo_giocatore << endl;

        cout << "La tua mano:\n";
        stampaManoAffiancata(mano1, cartaCoppe, cartaBastoni, cartaSpade, cartaDenari);

        mydata cartaPrima, cartaSeconda;
        bool primoagiocare = (primo_giocatore == "squadra1");
Sleep(750);
        if (primoagiocare) {
            int indice_carta;
            do {
                cout << "Scegli che carta giocare: 0, 1 o 2 " << endl; 
                cin >> indice_carta;
            } while (indice_carta < 0 || indice_carta >= (int)mano1.size());
            
            cartaPrima = mano1[indice_carta];
            mano1.erase(mano1.begin() + indice_carta);

            int indice_cartabot = scegliRispostaBot(mano2, cartaPrima, BRISCOLA);
            cartaSeconda = mano2[indice_cartabot];
            mano2.erase(mano2.begin() + indice_cartabot);
Sleep(750);
            cout << "Il bot risponde: "
                 << cartaSeconda.value << " di " << cartaSeconda.segno
                 << " (" << puntiDaValore(cartaSeconda.value) << " punti)" << endl;
        } 
        else {
            int indice_cartabot = scegliScartinaBot(mano2);
            cartaPrima = mano2[indice_cartabot];
            mano2.erase(mano2.begin() + indice_cartabot);
Sleep(750);
            cout << "Il bot gioca: "
                 << cartaPrima.value << " di " << cartaPrima.segno
                 << " (" << puntiDaValore(cartaPrima.value) << " punti)" << endl;
Sleep(750);
            int indice_carta;
            do {
                cout << "Scegli che carta giocare in risposta: 0, 1 o 2 " << endl;
                cin >> indice_carta;
            } while (indice_carta < 0 || indice_carta >= (int)mano1.size());
            
            cartaSeconda = mano1[indice_carta];
            mano1.erase(mano1.begin() + indice_carta);
        }

        bool primabriscola = (cartaPrima.segno == BRISCOLA);
        bool secondabriscola = (cartaSeconda.segno == BRISCOLA);
        int puntiPrima = puntiDaValore(cartaPrima.value);
        int puntiSeconda = puntiDaValore(cartaSeconda.value);

        string vincitore;
        
        if (cartaPrima.segno == cartaSeconda.segno) {
            vincitore = (puntiSeconda > puntiPrima) ? 
                        (primoagiocare ? "squadra2" : "squadra1") :
                        primo_giocatore;
        } else {
            if (primabriscola && !secondabriscola) vincitore = primo_giocatore;
            else if (!primabriscola && secondabriscola)
                vincitore = (puntiSeconda > puntiPrima) ?
                            (primoagiocare ? "squadra2" : "squadra1") :
                            primo_giocatore;
            else vincitore = primo_giocatore;
        }
Sleep(750);
        int puntiMano = puntiPrima + puntiSeconda;
        if (vincitore == "squadra2") {
            puntisq2 += puntiMano;
            cout << "La mano è vinta dal BOT. +" << puntiMano << endl;
        } else {
            puntisq1 += puntiMano;
            cout << "La mano è vinta da TE. +" << puntiMano << endl;
        }

        if (!mazzo.empty()) {
            if (vincitore == "squadra1") {
                mano1.push_back(mazzo.back()); mazzo.pop_back();
                if (!mazzo.empty()) mano2.push_back(mazzo.back()), mazzo.pop_back();
            } else {
                mano2.push_back(mazzo.back()); mazzo.pop_back();
                if (!mazzo.empty()) mano1.push_back(mazzo.back()), mazzo.pop_back();
            }
        }

        primo_giocatore = vincitore;
        cout << "Punteggio = TU: " << puntisq1 << " | BOT: " << puntisq2 << endl;
    }

    cout << "Partita terminata. TU: " << puntisq1 << " | BOT: " << puntisq2 << endl;
    return 0;
}
/*############################################################################################################*/

int unocontrounofacile(const string &cartaCoppe, const string &cartaBastoni,
                       const string &cartaSpade, const string &cartaDenari){
 
    srand(time(NULL));
    setlocale(LC_ALL, "ita");
    
    int puntisq2 = 0;
    int puntisq1 = 0;
    
    vector<mydata> mazzo = generaMazzo();

    vector<mydata> mano1, mano2;
    for (int i = 0; i < 3; ++i) {
        mano1.push_back(mazzo.back()); mazzo.pop_back();
        mano2.push_back(mazzo.back()); mazzo.pop_back();
    }

    string BRISCOLA = " ";
    if (!mazzo.empty()) BRISCOLA = mazzo.back().segno;
    cout << "BRISCOLA : " << BRISCOLA << endl;

    string primo_giocatore = "squadra1";

    while (!mano1.empty() && !mano2.empty()) {
        cout << "\n--- Nuova mano ---\n";
        cout << "Primo a giocare: " << primo_giocatore << " la BRISCOLA è : " << BRISCOLA << endl;

        cout << "La tua mano:\n";
        stampaManoAffiancata(mano1, cartaCoppe, cartaBastoni, cartaSpade, cartaDenari);

        mydata cartaPrima, cartaSeconda;
        bool primoagiocare = (primo_giocatore == "squadra1");

        if (primoagiocare) {
            int indice_carta;
            do {
                cout << "Scegli che carta giocare: 0, 1 o 2 " << endl; 
                cin >> indice_carta;
            } while (indice_carta < 0 || indice_carta >= (int)mano1.size());
            
            cartaPrima = mano1[indice_carta];
            mano1.erase(mano1.begin() + indice_carta);

            int indice_cartabot = rand() % mano2.size();
            cartaSeconda = mano2[indice_cartabot];
            mano2.erase(mano2.begin() + indice_cartabot);

            cout << "Il bot risponde: "
                 << cartaSeconda.value << " di " << cartaSeconda.segno
                 << " (" << puntiDaValore(cartaSeconda.value) << " punti)" << endl;
        } 
        else {
            int indice_cartabot = rand() % mano2.size();
            cartaPrima = mano2[indice_cartabot];
            mano2.erase(mano2.begin() + indice_cartabot);

            cout << "Il bot gioca: "
                 << cartaPrima.value << " di " << cartaPrima.segno
                 << " (" << puntiDaValore(cartaPrima.value) << " punti)" << endl;

            int indice_carta;
            do {
                cout << "Scegli che carta giocare in risposta: 0, 1 o 2 " << endl;
                cin >> indice_carta;
            } while (indice_carta < 0 || indice_carta >= (int)mano1.size());
            
            cartaSeconda = mano1[indice_carta];
            mano1.erase(mano1.begin() + indice_carta);
        }

        bool primabriscola = (cartaPrima.segno == BRISCOLA);
        bool secondabriscola = (cartaSeconda.segno == BRISCOLA);
        int puntiPrima = puntiDaValore(cartaPrima.value);
        int puntiSeconda = puntiDaValore(cartaSeconda.value);

        string vincitore;
        
        if (cartaPrima.segno == cartaSeconda.segno) {
            vincitore = (puntiSeconda > puntiPrima) ? 
                        (primoagiocare ? "squadra2" : "squadra1") :
                        primo_giocatore;
        } else {
            if (primabriscola && !secondabriscola) vincitore = primo_giocatore;
            else if (!primabriscola && secondabriscola)
                vincitore = (puntiSeconda > puntiPrima) ?
                            (primoagiocare ? "squadra2" : "squadra1") :
                            primo_giocatore;
            else vincitore = primo_giocatore;
        }

        int puntiMano = puntiPrima + puntiSeconda;
        if (vincitore == "squadra2") {
            puntisq2 += puntiMano;
            cout << "La mano è vinta dal BOT. +" << puntiMano << endl;
        } else {
            puntisq1 += puntiMano;
            cout << "La mano è vinta da TE. +" << puntiMano << endl;
        }

        if (!mazzo.empty()) {
            if (vincitore == "squadra1") {
                mano1.push_back(mazzo.back()); mazzo.pop_back();
                if (!mazzo.empty()) mano2.push_back(mazzo.back()), mazzo.pop_back();
            } else {
                mano2.push_back(mazzo.back()); mazzo.pop_back();
                if (!mazzo.empty()) mano1.push_back(mazzo.back()), mazzo.pop_back();
            }
        }

        primo_giocatore = vincitore;
        cout << "Punteggio = TU: " << puntisq1 << " | BOT: " << puntisq2 << endl;
    }

    cout << "Partita terminata. TU: " << puntisq1 << " | BOT: " << puntisq2 << endl;
    return 0;
}
/*############################################################################################################*/

int main(){

    SetConsoleOutputCP(CP_UTF8);

    // carta1 = COPPE
    string carta1 = u8R"(      .-------------------------.
      |   {NUM}                     |
      |            o            |
      |           / \           |
      |          /   \          |
      |         |     |         |
      |        /       \        |
      |     __/  (   )  \__     |
      |    |    (  *  )    |    |
      |    |_____(___)_____|    |
      |    |_______________|    |
      |    \               /    |
      |     \             /     |
      |      \           /      |
      |       \         /       |
      |       /         \       |
      |      /___________\      |
      |     o             o  {NUM}  |
      \_________________________/
)";

    // carta2 = BASTONI
    string carta2 = u8R"(      .-------------------------.
      |   {NUM}                    |
      |           ________      |
      |          /       /      |
      |     __  /       /__     |
      |     \ \ |       / /     |
      |      \ \|      / /      |
      |       \         |       |
      |        \        |       |
      |         |  (o)  |       |
      |      __ |       |       |
      |      \  \       |       |
      |       \  \      |__     |
      |        \        / /     |
      |         |        /      |
      |_________|       |_______|
      | ^   ^   |_______|  ^  ^ |
      |  ^   ^            ^  {NUM} |
      \_________________________/
)";

    // carta3 = SPADE
    string carta3 = u8R"(      .-------------------------.
      |   {NUM}       ^            |
      |           / \           |
      |          /   \          |
      |         |     |         |
      |         |     |         |
      |         |     |         |
      |         | (#) |         |
      |         | / \ |         |
      |         | \ / |         |
      |       __|_____|__       |
      |     <|___________|>     |
      |          |   |          |
      |          |   |          |
      |          |   |          |
      |          |___|          |
      |            o            |
      |                     {NUM}  |
      \_________________________/
)";

    // carta4 = DENARI
    string carta4 = u8R"(      .-------------------------.
      | __{NUM}      ____       __ |
      |/  \     /   o \_    /  \|
      |    |    |     ___\  |   |
      |  __/   /     |       \  |
      | |     |       \       | |
      | \_____/   ___  \______/ |
      |          /   \          |
      |          |   |          |
      |          \___/          |
      |                         |
      |      /\         /\      |
      |     /  |       |  \     |
      |  /|/   |       |   \|\  |
      | /      |       |      \ |
      |        \_    _/         |
      |          \  /           |
      |        __/  \__     {NUM}  |
      \_________________________/
)";

    int scelta = 0;
    int modalita = 0;

    system("mode con: cols=120 lines=40");
    system("chcp 65001 > nul");

    do {
        system("CLS");
        HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE);

        SetConsoleTextAttribute(hConsole, FOREGROUND_RED | FOREGROUND_INTENSITY);
        cout << "                                  ____________________________________________________" << endl;
        cout << "                                 {                    Briscola                        }" << endl;                                                                                                                                               
        cout << "                                 {   Elia cortesi; Nicolo' Bedeschi; Gabriele Romano  }" << endl;
        cout << "                                 {____________________________________________________} "<< endl;
 
           SetConsoleTextAttribute(hConsole, FOREGROUND_GREEN | FOREGROUND_INTENSITY);
 cout << "-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_" << endl;
 cout << "    _                  ____  ______ _____  _____  _____  _____   _                          .-------.                   " << endl;
 cout << "   | |        /\\      |  _ \\|  __  \|_   _|/ ____|/ ____ / __  \\ | |          /\\             |67.--. |                   " << endl;
 cout << "   | |       /  \\     | |_) | |__) | | |  | (___ | |   | |  | | | |         /  \\            | (\\/)  |                  " << endl;
 cout << "   | |      / /\\ \\    |  _ <|  _  /  | |  |\___  \\| |     |  | | | |        / /\\ \\\           | :\\/:  |                   " << endl;
 cout << "   | |____ / ____ \\   | |_) | | \\ \\ _| |_ ____) || |___| |__| | | |____   / ____ \\\          | '--'67|                   " << endl;
 cout << "   |______/_/    \\_\\  |____/|_|  \\_\\_\_____|_____/\\_____|\\_____/ |______| /_/    \\_\\         `-------'                   " << endl;
 cout << "-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-      " << endl;
 Sleep(1500);
        cout << "\n" << endl;
        SetConsoleTextAttribute(hConsole, FOREGROUND_RED | FOREGROUND_GREEN | FOREGROUND_INTENSITY);
        cout << "\n1. Singolo ===> 1 vs 1" << endl;
        cout<< "----------------"<<endl;
        Sleep(500);
        SetConsoleTextAttribute(hConsole, FOREGROUND_RED | FOREGROUND_INTENSITY);
        cout << "2. Doppio  ===> 2 vs 2" << endl;
        cout<< "----------------"<<endl;
        Sleep(500);
        SetConsoleTextAttribute(hConsole,FOREGROUND_BLUE | FOREGROUND_INTENSITY );
        cout << "3. Esci" << endl;
        cout<< "----------------"<<endl;
        Sleep(500);
        cout << "\nINSERISCI LA MODALITA' DI GIOCO: ";
        cin >> modalita;

        switch (modalita) {
            case 1:
            	Sleep(1000);
                cout << "Hai scelto l'Opzione 1, briscola 1 contro 1" << endl;
                Sleep(100);
                SetConsoleTextAttribute(hConsole, FOREGROUND_GREEN | FOREGROUND_INTENSITY);
                cout << "\n1. FACILE" << endl;
                cout<< "----------------"<<endl;
                Sleep(250);
                SetConsoleTextAttribute(hConsole, FOREGROUND_RED | FOREGROUND_INTENSITY);
                cout << "2. DIFFICILE" << endl;
                cout<< "----------------"<<endl;
                SetConsoleTextAttribute(hConsole, FOREGROUND_RED | FOREGROUND_GREEN | FOREGROUND_BLUE);
                cout << "\nSELEZIONA LA DIFFICOLTA: " << endl;
                cin >> scelta; 

                if (scelta == 1) {
                	Sleep(1000);
                    cout << "Hai scelto la difficolta facile, buona partita! " << endl;                        
                    unocontrounofacile(carta1, carta2, carta3, carta4);
                    system("pause");
                }
                else if (scelta == 2) {
                	Sleep(1000);
                    cout << "Hai scelto la difficolta difficile, buona partita! " << endl;                        
                    unocontrounomedio(carta1, carta2, carta3, carta4);
                    system("pause");
                }
                break;
            
            case 2:
            	Sleep(1000);
                cout << "Hai scelto l'opzione 2, briscola 2 contro 2" << endl;
                SetConsoleTextAttribute(hConsole, FOREGROUND_GREEN | FOREGROUND_INTENSITY);
                cout << "\n1. FACILE" << endl;
                cout<< "----------------"<<endl;
                Sleep(250);
                SetConsoleTextAttribute(hConsole, FOREGROUND_RED | FOREGROUND_INTENSITY);
                cout << "2. DIFFICILE" << endl;
                cout<< "----------------"<<endl;
                SetConsoleTextAttribute(hConsole, FOREGROUND_RED | FOREGROUND_GREEN | FOREGROUND_BLUE);
                cout << "\nSELEZIONA LA DIFFICOLTA: " << endl;
                cin >> scelta; 

                if (scelta == 1) {
                	Sleep(1000);
                    cout << "Hai scelto la difficolta facile, buona partita! " << endl;                        
                    duecontrodue(carta1, carta2, carta3, carta4);
                    system("pause");
                }
                else if (scelta == 2) {
                	Sleep(1000);
                    cout << "Hai scelto la difficolta difficile, buona partita! " << endl;                        
                    duecontrodue_difficile(carta1, carta2, carta3, carta4);
                    system("pause");
                }
            case 3:
                cout << "Uscita..." << endl;
                break;

            case 67:
                cout << "Hai scoperto l'easter egg, sei un sigma diddy blud ohio 6767676767676767" << endl;
                generaMazzo();
                system("pause");
                break;

            default:
                cout << "Ma sei ritardato ? Scegli una di queste opzioni" << endl;
                system("pause");
        }

    } while (modalita != 4);

    return 0;
}
